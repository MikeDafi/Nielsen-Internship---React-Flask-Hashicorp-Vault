{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\miasknda2101\\\\Documents\\\\React-Flask-Hashicorp-App\\\\my-app\\\\src\\\\HomeScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport CreateAPolicy from './CreateAPolicy';\nimport AssignPolicyToRole from './AssignPolicyToRole';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction HomeScreen(props) {\n  _s();\n\n  // props = {token:\"s.OQIbbJySqBwSsXdYIDHZUBNh\"}\n  const [roleToPolicies, setRoleToPolicies] = useState({});\n  const [policytoPolicyInfo, setPTPI] = useState({});\n  useEffect(async () => {\n    await fetchData();\n  });\n\n  async function fetchData() {\n    var roles = [];\n    var policies = [];\n    var roleToPTemp = {};\n    var policiesToPolicyInfo = {};\n    await fetch(`/auth?VAULT_TOKEN=` + props.token + `&auth_method=approle`, {\n      method: \"GET\"\n    }).then(response => response.json()).then(async data => {\n      roles = data;\n\n      for (var i = 0; i < roles.length; ++i) {\n        await fetch(`/auth?VAULT_TOKEN=` + props.token + `&auth_method=approle&role=` + roles[i], {\n          method: \"GET\"\n        }).then(response => response.json()).then(data => {\n          roleToPTemp[roles[i]] = data;\n        });\n      }\n\n      await setRoleToPolicies(roleToPTemp);\n    });\n    await fetch(`/policies?VAULT_TOKEN=` + props.token, {\n      method: \"GET\"\n    }).then(response => response.json()).then(async data => {\n      policies = data;\n\n      for (var i = 0; i < policies.length; ++i) {\n        await fetch(`/policies?VAULT_TOKEN=` + props.token + `&policyLabel=` + policies[i], {\n          method: \"GET\"\n        }).then(response => response.json()).then(data => {\n          policiesToPolicyInfo[policies[i]] = data;\n        });\n      }\n\n      await setPTPI(policiesToPolicyInfo);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    style: {\n      textAlign: \"left\",\n      marginLeft: 15,\n      marginBottom: 50\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        fontSize: 50,\n        color: \"black\",\n        textAlign: \"left\",\n        fontWeight: 500\n      },\n      children: \"Policy Editor\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(CreateAPolicy, {\n      token: props.token,\n      refreshData: fetchData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), Object.keys(policytoPolicyInfo).length > 0 && /*#__PURE__*/_jsxDEV(AssignPolicyToRole, {\n      refreshData: fetchData,\n      token: props.token,\n      roleToPolicies: roleToPolicies,\n      policytoPolicyInfo: policytoPolicyInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 7\n  }, this);\n}\n\n_s(HomeScreen, \"jPcKuMiWEkY7MBV8eFm7GMuw/n0=\");\n\n_c = HomeScreen;\nexport default HomeScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomeScreen\");","map":{"version":3,"sources":["C:/Users/miasknda2101/Documents/React-Flask-Hashicorp-App/my-app/src/HomeScreen.js"],"names":["React","useState","useEffect","CreateAPolicy","AssignPolicyToRole","HomeScreen","props","roleToPolicies","setRoleToPolicies","policytoPolicyInfo","setPTPI","fetchData","roles","policies","roleToPTemp","policiesToPolicyInfo","fetch","token","method","then","response","json","data","i","length","textAlign","marginLeft","marginBottom","fontSize","color","fontWeight","Object","keys"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport './App.css';\r\nimport CreateAPolicy from './CreateAPolicy';\r\nimport AssignPolicyToRole from './AssignPolicyToRole';\r\n\r\nfunction HomeScreen(props) {\r\n  // props = {token:\"s.OQIbbJySqBwSsXdYIDHZUBNh\"}\r\n  const [roleToPolicies,setRoleToPolicies] = useState({})\r\n  const [policytoPolicyInfo,setPTPI] = useState({})\r\n\r\n\r\n  useEffect(async () => {\r\n   await fetchData();\r\n  },)\r\n\r\n  async function fetchData(){\r\n    var roles = []\r\n    var policies = []\r\n    var roleToPTemp = {}\r\n    var policiesToPolicyInfo = {}\r\n    await fetch(`/auth?VAULT_TOKEN=` + props.token + `&auth_method=approle`, {\r\n      method: \"GET\"\r\n    }).then(response => response.json())\r\n    .then(async data => {roles = data;\r\n      for(var i = 0; i < roles.length;++i){\r\n        await fetch(`/auth?VAULT_TOKEN=` + props.token + `&auth_method=approle&role=`+roles[i], {\r\n          method: \"GET\"\r\n        }).then(response => response.json())\r\n        .then(data => {roleToPTemp[roles[i]] = data;})\r\n      }\r\n      await setRoleToPolicies(roleToPTemp)\r\n    \r\n    })\r\n    await fetch(`/policies?VAULT_TOKEN=` + props.token, {\r\n      method: \"GET\"\r\n    }).then(response => response.json())\r\n    .then(async data => { policies = data;\r\n    \r\n      for(var i = 0; i < policies.length;++i){\r\n        await fetch(`/policies?VAULT_TOKEN=` + props.token + `&policyLabel=`+policies[i], {\r\n          method: \"GET\"\r\n        }).then(response => response.json())\r\n        .then(data => {policiesToPolicyInfo[policies[i]] = data;})\r\n      }\r\n      await setPTPI(policiesToPolicyInfo)\r\n    })\r\n    \r\n  }\r\n  return (\r\n      <div className=\"App\" style={{textAlign:\"left\",marginLeft:15,marginBottom:50}}>\r\n\r\n        <p style={{fontSize:50,color:\"black\",textAlign:\"left\",fontWeight:500}}>Policy Editor</p>\r\n        <CreateAPolicy token={props.token} refreshData={fetchData}/>\r\n        {Object.keys(policytoPolicyInfo).length > 0 && \r\n        <AssignPolicyToRole refreshData={fetchData} \r\n          token={props.token} \r\n          roleToPolicies={roleToPolicies} \r\n          policytoPolicyInfo={policytoPolicyInfo}/>}\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default HomeScreen;\r\n "]},"metadata":{},"sourceType":"module"}